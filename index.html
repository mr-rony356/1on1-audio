<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Custom Audio Player</title>
    <!-- Plyr CSS -->
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
    <!-- Wavesurfer CSS -->
    <style>
      .audio-container {
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        width: 100%;
      }
      .audio-player-container {
        display: flex;
        align-items: center;
        gap: 10px;
        max-width: 700px;
        width: 100%;
        background-color: transparent;
        padding: 10px;
        border-radius: 10px;
        /* box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); */
        flex-wrap: wrap;
      }
      .play-btn {
        background-color: #d32f2f;
        color: #fff;
        border: none;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
      }
      .play-btn svg {
        width: 24px;
        height: 24px;
        fill: #fff;
      }
      .waveform {
        flex: 1;
        height: 60px;
        min-width: 0; /* Ensures proper flex behavior */
      }
      .audio-time {
        color: #888;
        font-weight: bold;
        text-align: center;
      }
      @media (max-width: 768px) {
        .audio-player-container {
          flex-wrap: wrap;
          justify-content: center;
        }
        .play-btn {
          width: 40px;
          height: 40px;
        }
        .play-btn svg {
          width: 20px;
          height: 20px;
        }
        .waveform {
          height: 50px;
        }
      }
      @media (max-width: 768px) {
        .audio-time {
          margin-top: 10px;
        }
        .play-btn {
          margin-top: 5px;
        }
      }
    </style>
  </head>
  <body>
    <div class="audio-container">
      <div class="audio-player-container">
        <button class="play-btn">
          <svg viewBox="0 0 24 24">
            <path d="M8 5v14l11-7z"></path>
          </svg>
        </button>
        <div class="waveform" id="waveform"></div>
        <div class="audio-time" id="audio-time">0:00</div>
      </div>
    </div>

    <!-- Plyr JavaScript -->
    <script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js"></script>
    <!-- Wavesurfer JavaScript -->
    <script src="https://unpkg.com/wavesurfer.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const playButton = document.querySelector(".play-btn");
        const audioTime = document.getElementById("audio-time");
        const waveform = WaveSurfer.create({
          container: "#waveform",
          waveColor: "#cccccc",
          progressColor: "#d32f2f",
          height: 60,
          barWidth: 2,
          cursorWidth: 0,
        });

        waveform.load("./eric audio.mp3");

        playButton.addEventListener("click", () => {
          if (waveform.isPlaying()) {
            waveform.pause();
            playButton.innerHTML =
              '<svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"></path></svg>';
          } else {
            waveform.play();
            playButton.innerHTML =
              '<svg viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path></svg>';
          }
        });

        waveform.on("audioprocess", updateTimer);
        waveform.on("ready", updateTimer);

        function updateTimer() {
          const currentTime = waveform.getCurrentTime();
          const duration = waveform.getDuration();
          const remainingTime = duration - currentTime;
          audioTime.textContent = `${formatTime(remainingTime)}`;
        }

        function formatTime(seconds) {
          const minutes = Math.floor(seconds / 60);
          const secs = Math.floor(seconds % 60);
          return `${minutes}:${secs < 10 ? "0" : ""}${secs}`;
        }
      });
    </script>
  </body>
</html>
